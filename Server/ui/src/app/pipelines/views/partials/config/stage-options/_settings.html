<!--Copyright (C) 2016 R&D Solutions Ltd.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<div id="stageSettings" style="padding: 0 0 10px 10px" ui-sref-active="active">
  <form name="editStageForm">

    <div style="width: 300px">

      <div class="form-group form-md-line-input">
        <input type="text" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" class="form-control small-device-label" ng-model="pipeConfig.updatedStage.name" ng-pattern="/^([\w-]+)$/" required>
        <label>Stage Name</label>
      </div>
      <div class="form-group form-md-radios">
        <label>Stage Trigger</label><span class="badge badge-default cursor-popover" style="margin-left:5px" onmouseenter="$(this).tooltip('show')" title="{{pipeConfig.popOverOptions.popOverTitles.triggeredManuallyGeneral}}">?</span>
        <div class="md-radio-list">
          <div class="md-radio">
            <input type="radio" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" id="sOnSuccess" name="trigger"
                   ng-value="false" class="md-radiobtn" ng-model="pipeConfig.updatedStage.isTriggeredManually">
            <label for="sOnSuccess">
              <span></span>
              <span class="check"></span>
              <span class="box"></span> On Success </label>
          </div>
          <div class="md-radio">
            <input type="radio" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" id="sManual" name="trigger"
                   ng-value="true" class="md-radiobtn" ng-model="pipeConfig.updatedStage.isTriggeredManually">
            <label for="sManual">
              <span></span>
              <span class="check"></span>
              <span class="box"></span> Manual </label>
          </div>
        </div>
      </div>
    </div>

    <button class="btn green-sharp" ng-click="pipeConfig.editStage(pipeConfig.updatedStage)"
            ng-disabled="editStageForm.$invalid || pipeConfig.updatedStage.isTriggeredManually == pipeConfig.stage.isTriggeredManually && pipeConfig.updatedStage.name == pipeConfig.stage.name || pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'">
      Update
    </button>
  </form>
</div>
