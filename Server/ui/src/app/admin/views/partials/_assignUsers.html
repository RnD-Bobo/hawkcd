<!--Copyright (C) 2016 R&D Solutions Ltd.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<div id="assignUser" class="modal fade" tabindex="-1" data-backdrop="static" data-keyboard="false">
    <div class="modal-dialog">
        <div class="modal-content">
            <br name="assignPipelineForm">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true" ng-click="admin.close()"></button>
                <h4 class="modal-title">Assign Users</h4>
            </div>
            <div class="modal-body">
                <form name="searchForm">
                <div class="input-group input-group-lg add-on custom-search">
                <input type="text" class="form-control search-query custom-line-height" ng-model="admin.query" ng-change="admin.search()" ng-pattern="/^([\w-]+)$/" placeholder="Search">
                    </div>
                <table id="users" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                    <tr>
                        <th>Username</th>
                        <th class="text-center">Assign
                            <span class="fa fa-exclamation-triangle text-danger cursor-popover hidden-xs" style="margin-left:5px" onmouseenter="$(this).tooltip('show')" title="{{admin.popOverOptions.popOverTitles.assignUserWarning}}"></span>
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="item in admin.pagedItems[admin.currentPage] | orderBy:admin.sortingOrder:reverse">
                        <td>{{item.email}}</td>
                        <td>
                            <div class="md-checkbox text-center">
                                <input type="checkbox" id="assign{{$index}}" class="md-check" ng-change="admin.toggleClicked(item)" ng-model="item.isAssigned">
                                <label for="assign{{$index}}">
                                    <span></span>
                                    <span class="check"></span>
                                    <span class="box"></span></label>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
                </form>
            </div>
            <div class="center-margin">
                <ul class="pagination">
                    <li ng-class="{disabled: admin.currentPage == 0}">
                        <a href="javascript:;" ng-click="admin.prevPage()">« Prev</a>
                    </li>
                    <li ng-repeat="n in admin.range(admin.pagedItems.length)" ng-class="{active: n == admin.currentPage}" ng-click="admin.setPage(n)">
                        <a href="javascript:;" ng-bind="n + 1">1</a>
                    </li>
                    <li ng-class="{disabled: admin.currentPage == admin.pagedItems.length - 1}">
                        <a href="javascript:;" ng-click="admin.nextPage()">Next »</a>
                    </li>
                </ul>
            </div>
            </br>
            <div class="form-group text-center">
                <button class="btn btn-primary" data-dismiss="modal" ng-disabled="searchForm.$invalid" ng-click="admin.assignUsers()">{{admin.defaultText.buttonTitles.ok}}</button>
                <button class="btn" data-dismiss="modal" ng-click="admin.close()">{{admin.defaultText.buttonTitles.cancel}}</button>
            </div>
            <br>
        </div>
    </div>
</div>
